/* ===================================================================
   FORM CHECKBOX
   Accessible, themeable custom checkbox with variants.
   ===================================================================

   Variants supported:
   üé® Color: primary, secondary, success, danger, warning, info, muted
   üìè Size: xs, sm, md, lg, xl, xxl
   ‚ú≥Ô∏è State: strikethrough
   ‚¨õ Style: toggle (switch), default (box)
*/

.form-checkbox {
  /* --- Component Variables (Defaults to MD size) --- */
  --checkbox-color: var(--color-primary);
  --checkbox-size: var(--space-md);
  --checkbox-font-size: var(--ms-md); /* Checkmark size */
  --checkbox-label-font-size: var(--ms-md);

  display: flex;
  align-items: center;
  gap: var(--space-sm);
  position: relative;
}

.form-checkbox__input {
  /* Visually hide the default checkbox but keep it accessible */
  position: absolute;
  opacity: 0;
  width: var(--space-xs);
  height: var(--space-xs);
}

.form-checkbox__label {
  position: relative;
  cursor: pointer;
  color: var(--color-text);
  font-size: var(--checkbox-label-font-size);
}

/* ===================================================================
   DEFAULT CHECKBOX VARIANT (The Box)
   =================================================================== */

.form-checkbox:not(.form-checkbox--toggle) .form-checkbox__label {
  padding-left: calc(var(--checkbox-size) + var(--space-xs)); /* Space for the custom box */
}

/* The custom box */
.form-checkbox:not(.form-checkbox--toggle) .form-checkbox__input + .form-checkbox__label::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border: var(--border-width) solid var(--color-border);
  border-radius: var(--radius-sm);
  background-color: var(--color-bg);
  transition: background-color var(--duration-short), border-color var(--duration-short);
}

/* The checkmark */
.form-checkbox:not(.form-checkbox--toggle) .form-checkbox__input:checked + .form-checkbox__label::after {
  content: '‚úî';
  position: absolute;
  left: calc(var(--space-xs) * 0.8); /* Adjust based on size */
  top: 50%;
  transform: translateY(-50%);
  font-size: var(--checkbox-font-size);
  color: var(--checkbox-color);
}

/* Focus state for default checkbox */
.form-checkbox:not(.form-checkbox--toggle) .form-checkbox__input:focus-visible + .form-checkbox__label::before {
  box-shadow: var(--shadow-focus);
}

/* Strikethrough modifier for default checkbox */
.form-checkbox--strikethrough.form-checkbox:not(.form-checkbox--toggle) .form-checkbox__input:checked + .form-checkbox__label {
  text-decoration: line-through;
  color: var(--color-muted-dark);
}


/* ===================================================================
   TOGGLE SWITCH VARIANT
   =================================================================== */

.form-checkbox--toggle .form-checkbox__label {
  padding-left: calc(var(--checkbox-size) * 2.4); /* Space for the toggle switch */
}

/* The track of the switch */
.form-checkbox--toggle .form-checkbox__input + .form-checkbox__label::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: calc(var(--checkbox-size) * 2);
  height: calc(var(--checkbox-size) + var(--space-xxs));
  border-radius: var(--radius-full);
  background-color: var(--color-surface-dark);
  transition: background-color var(--duration-short);
}

/* The thumb (the moving part) */
.form-checkbox--toggle .form-checkbox__input + .form-checkbox__label::after {
  content: '';
  position: absolute;
  left: var(--space-xxs);
  top: 50%;
  transform: translateY(-50%);
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--radius-full);
  background-color: var(--white);
  transition: transform var(--duration-short) var(--timing-function-ease);
}

/* --- Toggle Checked State --- */
.form-checkbox--toggle .form-checkbox__input:checked + .form-checkbox__label::before {
  background-color: var(--checkbox-color);
}

.form-checkbox--toggle .form-checkbox__input:checked + .form-checkbox__label::after {
  transform: translate(calc(var(--checkbox-size) - var(--space-xxs)), -50%);
}

/* Focus state for toggle */
.form-checkbox--toggle .form-checkbox__input:focus-visible + .form-checkbox__label::before {
  box-shadow: var(--shadow-focus);
}

/* ===================================================================
   COLOR VARIANTS
   =================================================================== */
.form-checkbox--secondary { --checkbox-color: var(--color-secondary); }
.form-checkbox--success { --checkbox-color: var(--color-success); }
.form-checkbox--danger { --checkbox-color: var(--color-danger); }
.form-checkbox--warning { --checkbox-color: var(--color-warning); }
.form-checkbox--info { --checkbox-color: var(--color-info); }
.form-checkbox--muted { --checkbox-color: var(--color-muted); }

/* ===================================================================
   SIZE VARIANTS
   =================================================================== */
.form-checkbox--xs {
  --checkbox-size: var(--space-xs);
  --checkbox-font-size: var(--ms-xs);
  --checkbox-label-font-size: var(--ms-xs);
}

.form-checkbox--sm {
  --checkbox-size: var(--space-sm);
  --checkbox-font-size: var(--ms-sm);
  --checkbox-label-font-size: var(--ms-sm);
}

/* MD is the default, no class needed */

.form-checkbox--lg {
  --checkbox-size: var(--space-lg);
  --checkbox-font-size: var(--ms-lg);
  --checkbox-label-font-size: var(--ms-lg);
}

.form-checkbox--xl {
  --checkbox-size: var(--space-xl);
  --checkbox-font-size: var(--ms-xl);
  --checkbox-label-font-size: var(--ms-xl);
}

.form-checkbox--xxl {
  --checkbox-size: var(--space-xxl);
  --checkbox-font-size: var(--ms-xxl);
  --checkbox-label-font-size: var(--ms-xxl);
}